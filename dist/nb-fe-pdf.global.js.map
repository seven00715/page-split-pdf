{"version":3,"file":"nb-fe-pdf.global.js","sources":["../src/const.ts","../src/utils.ts","../src/PdfPage.ts","../src/DfsChild.ts","../index.ts","../src/SplitePage.ts","../src/Compose.ts","../src/waterMark.ts","../src/index.ts"],"sourcesContent":["export default class Const {\n  // defaut use elementui table component classnames\n  static cardTableTBHeaderWraper = 'el-table__header-wrapper' // table header wraper classname\n  static cardElRowClass = 'el-table__row' // table body row  classname\n  static cardTableTr = 'tr' // 这里用的tr标签\n  static elTableBodyWraper = 'el-table__body-wrapper' // table body wraper classname\n\n  static cardTableTr4n = 'table_tr_4n'\n\n  static spliteFlagWraper = 'page-splite-flag-wraper'\n  static spliteFlag = 'page-splite-flag' // 固定模块flag class标识\n  static tableRowSpanMerge = 'table-rowspan-merge' // rowspan merge flag\n  static tableRowExpand = 'table-row-expand' // table row expand\n\n  static tableClass = 'card-table' // table class 标识\n  static cardTableTopWraper = 'card-table-top-wraper'\n  static cardTableWraper = 'card-table-wraper'\n  static cardTableBomWraper = 'card-table-bom-wraper'\n\n  static printImg = 'print-img'\n  static printImgHeight = 'print-img-height'\n\n  static elTbody = 'tbody'\n  static minRowsCount = 3\n  static rowHeight = 40\n  static headerHeight = 40\n  static wrapePadTop = 20\n  // 展示页面标记\n  static printNormalTag = 'print-normal-tag'\n  static printHeaderTag = 'print-header-tag'\n  static printFooterTag = 'print-footer-tag'\n  static printHeaderFooterTag = 'print-header-footer-tag'\n\n  static pHeaderH = 50 // header高度\n  static pFooterH = 44 // 尾部高度\n  // 下载页面标记\n  //  一个下载页面有 header + main + footer 组成\n  static printPageWraper = 'print-page-wraper' // 普通页面标记类\n  static printImgWraper = 'print-img-wraper' // 图片页面标记类\n  static printLastWraper = 'print-last-wraper' // 最后一个页面标记class\n  static printHeaderName = 'print-header-name' // header class\n  static printMainName = 'print-main-name' //  主要内容 class\n  static printFooterName = 'print-footer-name' //  footer class\n\n  static setTableClass(classnames: Object) {\n    for (const classname in classnames) {\n      this[classname] = classnames[classname]\n    }\n  }\n}\n","import { CurrentStyleElement, PrintTemplatesTag } from \"../index\";\n\nexport function getDeviceParams() {\n  // 获取屏幕分辨率dpi(一英寸展示多少个像素)\n  const dpiEle = document.createElement(\"div\");\n  dpiEle.setAttribute(\"style\", \"width:1in;height:1in;overflow:hidden;\");\n  const body = document.querySelector(\"body\");\n  body?.appendChild(dpiEle);\n  const offsetWidth = dpiEle.offsetWidth;\n  const width = Math.round(8.27 * offsetWidth);\n  const height = Math.ceil(11.69 * offsetWidth);\n  body?.removeChild(dpiEle);\n  return {\n    width,\n    height,\n  };\n}\n\nexport function calcHeight(ele: HTMLElement | CurrentStyleElement) {\n  return (\n    (ele as HTMLElement).offsetHeight +\n    getStyle(ele as CurrentStyleElement, \"marginTop\") +\n    getStyle(ele as CurrentStyleElement, \"marginBottom\")\n  );\n}\n\nexport let getStyle = function (\n  ele: CurrentStyleElement,\n  attr: string\n): number {\n  if (typeof getComputedStyle !== \"undefined\") {\n    getStyle = function (ele: CurrentStyleElement, attr: string) {\n      return parseInt(\n        (document.defaultView as Window).getComputedStyle(ele as Element, null)[\n          attr\n        ]\n      );\n    };\n  } else {\n    getStyle = function (ele: CurrentStyleElement, attr: string) {\n      return parseInt(ele.currentStyle[attr]);\n    };\n  }\n  return getStyle(ele, attr);\n};\n\nexport function findTplTag(tpl: Element) {\n  return Array.prototype.find.call((tpl as Element).classList, (item) =>\n    item.startsWith(PrintTemplatesTag.printPdfTpl)\n  );\n}\n","import { Ele, PageInfo, PrintTemplatesTag, TplMap, TplMapItem } from \"../index\";\nimport { ModuleType, PrintType } from \"../index\";\nimport { findTplTag } from \"./utils\";\nimport DfsChild from \"./DfsChild\";\nimport Const from \"./const\";\n/**\n * 主要思想：发布订阅\n *  将动态创建的wraper 订阅到deps里面, 下载的时候统一发布deps里面的wraper；\n */\nexport default class PdfPage {\n  constructor() {\n    this.deps = document.createElement(\"div\");\n  }\n  deps: Ele = document.createElement(\"div\");\n  curPage: any;\n  ele: any;\n  wraper: Ele = null;\n  tbWraper: Ele = null;\n  mainHeigth = 0;\n  base = {};\n  pageInfo: PageInfo = {};\n  pageHeight = 0;\n  headerTplMap = DfsChild.headerTplMap;\n  footerTplMap = DfsChild.footerTplMap;\n\n  createWraper(ele: Ele) {\n    this.ele = ele;\n    this.initPage();\n    this.curPage = this.wraper;\n    this.deps?.appendChild(this.curPage);\n    return this.mainHeigth;\n  }\n  /**\n   * 初始化 imgPageWraper 和普通页面的wraper\n   */\n  initPage() {\n    if (this.ele) {\n      const pageType = this.getPageType(this.ele as HTMLElement);\n      if (this.ele?.classList.contains(Const.printImg)) {\n        (this.ele as HTMLElement).classList.add(Const.printImgHeight);\n        this.wraper = this.createPageWraper(Const.printImgWraper, pageType);\n      } else {\n        this.wraper = this.createPageWraper(Const.printPageWraper, pageType);\n      }\n      let header;\n      let main;\n      let footer;\n\n      if (pageType === PrintType.NORMAL_TYPE) {\n        this.mainHeigth = this.pageHeight;\n        main = this.createModule(Const.printMainName, this.pageHeight);\n      }\n\n      if (pageType === PrintType.HEADER_TYPE) {\n        const { tpl, heigth: pHeaderH } = this.cloneTpl(\n          this.ele,\n          this.headerTplMap,\n          Const.printHeaderName\n        );\n        header = tpl;\n        this.mainHeigth = this.pageHeight - pHeaderH;\n        main = this.createModule(Const.printMainName, this.mainHeigth);\n      }\n\n      if (pageType === PrintType.FOOTER_TYPE) {\n        const { tpl, heigth: pFooterH } = this.cloneTpl(\n          this.ele,\n          this.footerTplMap,\n          Const.printFooterName\n        );\n        footer = tpl;\n        this.mainHeigth = this.pageHeight - pFooterH;\n        main = this.createModule(Const.printMainName, this.mainHeigth);\n      }\n\n      if (pageType === PrintType.HEADER_FOOTER_TYPE) {\n        const { tpl: HTpl, heigth: pHeaderH } = this.cloneTpl(\n          this.ele,\n          this.headerTplMap,\n          Const.printHeaderName\n        );\n        header = HTpl;\n        const { tpl: FTpl, heigth: pFooterH } = this.cloneTpl(\n          this.ele,\n          this.footerTplMap,\n          Const.printFooterName\n        );\n        footer = FTpl;\n        this.mainHeigth = this.pageHeight - pHeaderH - pFooterH;\n        main = this.createModule(Const.printMainName, this.mainHeigth);\n      }\n\n      header && this.wraper.appendChild(header);\n      main && this.wraper.appendChild(main);\n      footer && this.wraper.appendChild(footer);\n    }\n  }\n\n  getPageType(ele: HTMLElement) {\n    //@ts-ignore\n    const TYPES = Object.values(PrintType);\n    const type = Array.from(ele.classList).find((item) =>\n      TYPES.includes(item as PrintType)\n    );\n    return type || this.pageInfo.defaultType || PrintType.NORMAL_TYPE;\n  }\n\n  cloneTpl(ele: Element, map: TplMap, className: string) {\n    const flag = findTplTag(ele);\n    let cloneTpl!: HTMLDivElement;\n    let cloneheight = 0;\n    let tplMap: TplMapItem;\n    if (this.pageInfo.needTpl) {\n      if (map.size === 0) {\n        console.error(`needTpl：true，需要传入对应的template!`);\n      }\n      if (map.size > 0) {\n        if (flag && map.has(flag)) {\n          tplMap = map.get(flag) as TplMapItem;\n        } else {\n          tplMap =\n            className === Const.printHeaderName\n              ? (map.get(\n                  PrintTemplatesTag.printPdfTplHeaderDefault\n                ) as TplMapItem)\n              : (map.get(\n                  PrintTemplatesTag.printPdfTplFooterDefault\n                ) as TplMapItem);\n        }\n        cloneTpl = tplMap.tpl.cloneNode(true) as HTMLDivElement;\n        cloneTpl.classList.add(className);\n        cloneheight = tplMap.height;\n        cloneTpl.style.height = cloneheight + \"px\";\n      }\n    }\n\n    return {\n      tpl: cloneTpl,\n      heigth: cloneheight,\n    };\n  }\n\n  /**\n   * 动态创建 pdf A4 page wraper\n   * @param name \"print-img-wraper\" 图片页面标记类;  \"print-page-wraper\"普通页面标记类\n   * @param pageType PrintType\n   * @returns\n   */\n  createPageWraper(name: string, pageType: string): HTMLElement {\n    const wraper = document.createElement(\"div\");\n    wraper.classList.add(pageType);\n    wraper.classList.add(name);\n    return wraper;\n  }\n\n  /**\n   * 创建 pdf A4纸张中的 一个个模块 header footer main\n   * @param name header/footer/main 的class 类名\n   * @param height header/footer/main 高度\n   * @returns 创建好的模块\n   */\n  createModule(name: string, height: number) {\n    const module = document.createElement(\"div\");\n    module.style.height = height + \"px\";\n    module.classList.add(name);\n    return module;\n  }\n\n  /**\n   * 往page里面添加模块 模块类型有： 1.单独的img 2. 独立的module 3. tableModule 4.table tbody 5. table row\n   * @param ele 要添加的元素 ModuleType\n   * @param height 元素的高度\n   * @param type  ModuleType\n   * @returns 返回当前页面剩余的高度\n   */\n  appendModule(ele: Ele, height: number, type: ModuleType): number {\n    if (ele) {\n      if (type === ModuleType.ROW) {\n        const main = (this.wraper as any)?.querySelector(\n          `.${Const.printMainName}`\n        );\n        let wr = main.querySelectorAll(`.${Const.cardTableWraper}`);\n        wr = wr[Array.from(wr).length - 1];\n        const by = wr.querySelector(`${Const.elTbody}`);\n        by.appendChild(ele as Element);\n      } else {\n        this.wraper\n          ?.querySelector(`.${Const.printMainName}`)\n          ?.appendChild(ele as Element);\n      }\n      this.mainHeigth = this.mainHeigth - height;\n    }\n    return this.mainHeigth;\n  }\n}\n","import Const from './const'\nimport { calcHeight, findTplTag } from './utils'\nimport { CurrentStyleElement, PrintTemplatesTag, TbModuleInfo, TplMap } from '../index'\nimport PdfPage from './PdfPage'\n\nexport default class DfsChild extends PdfPage {\n  constructor() {\n    super()\n  }\n  childMap = new Map()\n  static headerTplMap = new Map()\n  static footerTplMap = new Map()\n  flagNum = 0 // 只是为了方便 排查分页后的打印数据 中的模块 和页面元素的 之间的对应关系\n  time = 1\n  walk(ele: HTMLElement) {\n    this.time++\n    if (ele.hasChildNodes()) {\n      const nodeQueue = Array.from(ele.children)\n      while (nodeQueue.length > 0) {\n        const node = nodeQueue.shift()\n        if (node?.classList.contains(Const.spliteFlag)) {\n          this.setPagesMap(node as HTMLElement)\n          continue\n        } else {\n          this.walk(node as HTMLElement)\n        }\n      }\n    } else {\n      this.setPagesMap(ele as HTMLElement)\n    }\n  }\n\n  setPagesMap(ele: HTMLElement) {\n    if (ele.classList.contains(Const.spliteFlag) && !this.childMap.has(ele)) {\n      ele.classList.add(`flagNum-${this.flagNum++}`)\n      this.childMap.set(ele, this.getModuleInfo(ele))\n    }\n  }\n\n  getModuleInfo(ele: HTMLElement) {\n    const isTable = ele.classList.contains(Const.tableClass)\n    const moduleInfo = {\n      height: calcHeight(ele),\n      isTable,\n      tableModuleInfo: {}\n    }\n    if (isTable) {\n      moduleInfo.tableModuleInfo = this.getTableModuleInfo(ele, moduleInfo.height)\n    }\n    return moduleInfo\n  }\n\n  getTableModuleInfo(ele: HTMLElement, height: number) {\n    console.log('getTableModuleInfo ele', ele)\n    const tbModuleInfo: TbModuleInfo = {\n      tbTopInfo: this.getEleHeight(ele, Const.cardTableTopWraper),\n      tbHeader: this.getEleHeight(ele, Const.cardTableTBHeaderWraper),\n      table: this.getEleHeight(ele, Const.cardTableWraper),\n      tbBomInfo: this.getEleHeight(ele, Const.cardTableBomWraper),\n      minHeight: 0,\n      marginPadHeight: 0\n    }\n    let expandRow = ele.classList.contains(Const.tableRowExpand)\n    // console.log(\"getMinHeight tbModuleInfo\", tbModuleInfo);\n    tbModuleInfo.minHeight = this.getMinHeight(\n      ele,\n      (tbModuleInfo as unknown) as TbModuleInfo,\n      height,\n      expandRow\n    )\n    let needMerge = ele.classList.contains(Const.tableRowSpanMerge)\n    if (needMerge) {\n      this.setRowSpanMergeInfo(ele)\n    }\n    let marginPadHeight =\n      height -\n      (tbModuleInfo.tbTopInfo.height +\n        tbModuleInfo.table.height +\n        tbModuleInfo.tbBomInfo.height)\n    tbModuleInfo.marginPadHeight = marginPadHeight\n    tbModuleInfo.needMerge = needMerge\n\n    tbModuleInfo.expandRow = expandRow\n    return tbModuleInfo\n  }\n  /**\n   * minHeight 最小高度 = topInfoHeight + tbHeaderheight + row * minRowsCount\n   */\n  getMinHeight(\n    ele: HTMLElement,\n    tbModuleInfo: TbModuleInfo,\n    height: number,\n    expandRow = false\n  ) {\n    const nodes = Array.from(ele.querySelectorAll(Const.cardTableTr))\n    const { tbTopInfo, tbHeader } = tbModuleInfo\n    let threeRowHeight = 0\n\n    if (nodes.length > Const.minRowsCount) {\n      nodes.forEach((node, index) => {\n        if (index < Const.minRowsCount) {\n          threeRowHeight += calcHeight(node as HTMLElement) || 0\n        }\n        ;(node as any).calcHeight = node.clientHeight\n        if (expandRow) {\n          if (index % 4 < 3 && index % 4 > 0) {\n            node.classList.add(Const.cardTableTr4n)\n          }\n        }\n      })\n      return tbTopInfo.height + tbHeader.height + threeRowHeight\n    } else {\n      nodes.forEach((node, index) => {\n        ;(node as any).calcHeight = node.clientHeight\n      })\n      return height\n    }\n  }\n\n  setRowSpanMergeInfo(ele: HTMLElement) {\n    let needMerge = ele.classList.contains(Const.tableRowSpanMerge)\n    if (needMerge) {\n      const rows = ele.querySelectorAll('.' + Const.cardElRowClass)\n      const mergeTdArgs = []\n      let num = 0\n      let totalRowSpan = 1\n      rows.forEach((row, rowIndex) => {\n        const tds = row.children\n        let mergedInfo = {\n          needMergeRow: false,\n          rowIndex,\n          tdIndex: null,\n          needRowSpanNum: 1,\n          isLeftRow: false\n        }\n\n        if (num > 1) {\n          num--\n          Object.assign(mergedInfo, {\n            needMergeRow: true,\n            isLeftRow: true,\n            rowIndex,\n            tdIndex: null,\n            needRowSpanNum: num\n          })\n        } else {\n          Array.from(tds).forEach((td: Element, tdIndex) => {\n            const rowSpan = Number((td as HTMLElement).getAttribute('rowspan'))\n            if (rowSpan > 1) {\n              num = rowSpan\n              Object.assign(mergedInfo, {\n                needMergeRow: true,\n                rowIndex,\n                tdIndex,\n                needRowSpanNum: Number(rowSpan)\n              })\n              totalRowSpan = rowSpan\n            }\n          })\n        }\n        ;(row as CurrentStyleElement).mergedInfo = mergedInfo\n        // row.rowIndex = rowIndex;\n        // row.needMergeRow = needMergeRow;\n        // row.mergeTdArgs = mergeTdArgs;\n      })\n    }\n    return needMerge\n  }\n\n  getEleHeight(ele: HTMLElement, className: string) {\n    const module: HTMLElement = ele.querySelector('.' + className) as HTMLElement\n    if (ele && module) {\n      return {\n        module,\n        height: calcHeight(module)\n      }\n    } else {\n      return {\n        module,\n        height: 0\n      }\n    }\n  }\n\n  static getTpl() {\n    const headerTpls = this.getChildTpls(PrintTemplatesTag.printHeadertemplates)\n    const footerTpls = this.getChildTpls(PrintTemplatesTag.printFooterTemplates)\n    this.headerTplMap.size === 0 &&\n      this.setTplFunc(headerTpls as Element[], this.headerTplMap)\n    this.footerTplMap.size === 0 &&\n      this.setTplFunc(footerTpls as Element[], this.footerTplMap)\n\n    // console.log(\"this.headerTplMap\", this.headerTplMap);\n    // console.log(\"this.headerTplMap\", this.footerTplMap);\n  }\n\n  static setTplFunc(tpls: Element[], map: TplMap) {\n    tpls.forEach((tpl: ChildNode) => {\n      const flag = findTplTag(tpl as Element)\n      if (flag && !map.has(flag)) {\n        map.set(flag, {\n          tpl: tpl as Element,\n          height: (tpl as HTMLDivElement).offsetHeight\n        })\n      }\n    })\n  }\n  static getChildTpls(flag: string) {\n    const ele = document.getElementById(flag)\n    if (ele) {\n      return ele.childNodes\n    }\n    return []\n  }\n}\n","import DfsChild from './src/DfsChild'\n\nexport { Print } from './src/index'\n\nexport declare class PrintPageDeclare extends DfsChild {\n  print: () => Promise<boolean>\n}\n\nexport enum PrintType {\n  NORMAL_TYPE = 'NORMAL_TYPE', // 无头无尾\n  HEADER_TYPE = 'HEADER_TYPE', // 有头无尾\n  FOOTER_TYPE = 'FOOTER_TYPE', // 无头有尾\n  HEADER_FOOTER_TYPE = 'HEADER_FOOTER_TYPE' // 有头有尾\n}\n\nexport enum ModuleType {\n  IMG = 'IMG',\n  MODULE = 'MODULE',\n  TB_MODULE = 'TB_MODULE',\n  TBODY = 'TBODY',\n  ROW = 'ROW'\n}\n\nexport const enum ShapeFlags {\n  NORMAL_PAGE = 1,\n  HEADER_PAGE = 1 << 1,\n  FOOTER_PAGE = 1 << 2,\n  TOTAL_PAGE = ShapeFlags.HEADER_PAGE | ShapeFlags.FOOTER_PAGE\n}\n\nexport interface PageInfo {\n  title?: string\n  needTpl?: boolean // 是否需要模板\n  defaultType?: PrintType\n  waterMark?: boolean\n  waterMarkConfig?: MarkConfig // 需要waterMark为true\n  [PropName: string]: any\n}\nexport interface ModuleInfo {\n  moduleId: string\n  pageInfo: PageInfo\n}\nexport interface DeviceParams {\n  width: number\n  height: number\n}\nexport type ModuleMap = Map<string, ModuleInfo>\nexport interface CurrentStyleElement extends Element {\n  currentStyle: {\n    [propName: string]: any\n  }\n  calcHeight: number\n  mergedInfo: {\n    needMergeRow: boolean\n    needRowSpanNum: number\n    isLeftRow: boolean\n  }\n}\n\nexport enum PrintTemplatesTag {\n  printHeadertemplates = 'print-header-templates', // header template wraper\n  printFooterTemplates = 'print-footer-templates', // footer template wraper\n  printPdfTpl = 'print-pdf-tpl', //  template\n  printPdfTplFooterDefault = 'print-pdf-tpl-footer-default', // default footer tpl class\n  printPdfTplHeaderDefault = 'print-pdf-tpl-header-default' // default header tpl class\n}\n\nexport type Ele = Element | null\n\nexport interface TplMapItem {\n  tpl: Element\n  height: number\n}\n\nexport type TplMap = Map<string, TplMapItem>\n\nexport interface EleStyleInfo {\n  height: number\n  isTable: boolean\n  tableModuleInfo: TbModuleInfo\n}\n\nexport interface TbModuleInfoItem {\n  module: HTMLElement\n  height: number\n  talbeWraper?: boolean\n  tbHeaderHeight?: number\n}\nexport interface TbQueueItem {\n  height: number\n  module: HTMLElement\n}\nexport interface TbModuleInfo {\n  tbTopInfo: TbQueueItem\n  tbHeader: TbQueueItem\n  table: TbQueueItem\n  tbBomInfo: TbQueueItem\n  minHeight: number\n  marginPadHeight: number\n  needMerge?: boolean\n  expandRow?: boolean\n}\nexport interface MarkConfig {\n  waterMarkId: string // 要做水印的根元素id\n  waterMarkContent: string // 水印内容\n  waterMarkColor?: string //水印颜色\n  waterMarkAlpha?: number // 水印透明度\n  waterMarkY?: number\n  waterMarkRows?: number\n  waterMarkCols?: number\n  waterMarkXSpace?: number // 水印之间水平间隔\n  waterMarkYSpace?: number // 水印之间垂直间隔\n  waterMarkFontSize?: string // 水印字体大小\n  waterMarkFont?: string // 水印字体\n  waterMarkWidth?: number // 水印宽度\n  waterMarkHeight?: number // 水印高度\n  waterMarkAngle?: number // 水印旋转角度\n}\n","import { ModuleType, PageInfo } from '../index'\nimport Const from './const'\nimport { TbModuleInfoItem, CurrentStyleElement, Ele, TbQueueItem } from '../index'\nimport DfsChild from './DfsChild'\n\nexport default class SplitePage extends DfsChild {\n  constructor() {\n    super()\n  }\n  completeSplit = false\n  tBody: HTMLElement[] | null = null\n  cloneEmptyTable: HTMLElement | null = null\n\n  tbodyAppendChild(table: HTMLElement, row: HTMLElement) {\n    table.querySelector('.' + Const.elTbody)?.appendChild(row)\n  }\n\n  /**\n   * 拆分table\n   */\n  splitTable(ele: Ele, distance: number) {\n    const moduleInfo = this.childMap.get(ele)\n    const {\n      tbTopInfo,\n      table,\n      tbBomInfo,\n      minHeight,\n      marginPadHeight,\n      needMerge,\n      expandRow\n    } = moduleInfo.tableModuleInfo\n    const tbQueue: TbModuleInfoItem[] = [tbTopInfo, table, tbBomInfo].filter(\n      (item) => item.height > 5\n    )\n    if (distance < minHeight) {\n      distance = this.createWraper(ele) - marginPadHeight\n    } else {\n      distance = distance - marginPadHeight\n    }\n\n    while (tbQueue.length > 0) {\n      let item: TbModuleInfoItem = tbQueue.shift() as TbModuleInfoItem\n      let flag = false\n      if (\n        item.module.classList.contains(Const.cardTableTopWraper) &&\n        distance > minHeight\n      ) {\n        flag = true\n      }\n\n      if (item.module.classList.contains(Const.cardTableWraper) && distance > item.height) {\n        flag = true\n      }\n\n      if (\n        item.module.classList.contains(Const.cardTableBomWraper) &&\n        distance > item.height\n      ) {\n        flag = true\n      }\n\n      if (flag) {\n        distance = this.appendModule(item.module, item.height, ModuleType.TB_MODULE)\n      } else {\n        if (item.module.classList.contains(Const.cardTableWraper)) {\n          const module = item.module\n          const rowQueue = this.findRows(module)\n          const headerDom = rowQueue[0].cloneNode(true)\n          this.cleanTbody(module)\n          this.cloneTable(module as HTMLElement)\n          if (distance < minHeight) {\n            distance = this.createWraper(module)\n          }\n          distance = this.appendModule(\n            this.createTBModule(this.cloneEmptyTable as Element),\n            100,\n            ModuleType.TBODY\n          )\n\n          let tbBomHeight = tbBomInfo.height\n          while (rowQueue.length > 0) {\n            let row = rowQueue.shift()\n            const height = (row as any).calcHeight\n            if (distance > height + tbBomHeight) {\n              distance = this.appendModule(row as Element, height, ModuleType.ROW)\n            } else {\n              distance = this.createWraper(module)\n              distance = this.appendModule(\n                this.createTBModule(this.cloneEmptyTable as Element),\n                100,\n                ModuleType.TBODY\n              )\n\n              if (expandRow && headerDom) {\n                const cloneHeader = headerDom.cloneNode(true)\n                this.appendModule(cloneHeader as Element, 0, ModuleType.ROW)\n              }\n\n              if (needMerge) {\n                console.log('needMerge', (row as any).mergedInfo)\n                const { needMergeRow, isLeftRow, needRowSpanNum } = (row as any).mergedInfo\n                if (needMergeRow && isLeftRow && needRowSpanNum) {\n                  let td = document.createElement('td')\n                  td.classList.add('el-table_1_column_1')\n                  td.classList.add('el-table__cell')\n                  td.setAttribute('rowspan', String(needRowSpanNum))\n                  row && row.prepend(td)\n                }\n              }\n              distance = this.appendModule(row as Element, height, ModuleType.ROW)\n            }\n          }\n        } else {\n          distance = this.createWraper(ele)\n          distance = this.appendModule(item.module, item.height, ModuleType.TB_MODULE)\n        }\n      }\n    }\n    return distance\n  }\n\n  /**\n   * 拆分页面\n   */\n  splitPage(pageInfo: PageInfo) {\n    this.pageInfo = pageInfo\n    let distance = 0\n    let idx = 0\n    const stack = [...(this.childMap.keys() as any)]\n    let flag = true\n    const next = () => {\n      if (idx >= stack.length) return\n      const ele = stack[idx++]\n      if (ele.classList.contains(Const.printImg)) {\n        this.createWraper(ele)\n        this.appendModule(ele, 0, ModuleType.IMG)\n        if (!flag) {\n          flag = true\n        }\n      } else {\n        if (flag) {\n          distance = this.createWraper(ele)\n          flag = false\n        }\n\n        const nodeInfo = this.childMap.get(ele)\n        // 剩余距离小于 元素的高度 放不下\n        if (distance < nodeInfo.height) {\n          // 是table\n          if (nodeInfo.isTable) {\n            distance = this.splitTable(ele, distance)\n          } else {\n            // 重新创建页面\n            this.createWraper(ele)\n            distance = this.appendModule(ele, nodeInfo.height, ModuleType.MODULE)\n          }\n        } else {\n          // 能放下\n          distance = this.appendModule(ele, nodeInfo.height, ModuleType.MODULE)\n        }\n      }\n      next()\n    }\n    next()\n  }\n\n  cloneTable(table: HTMLElement) {\n    this.cloneEmptyTable = table.cloneNode(true) as HTMLElement\n    this.removeStyleHeight()\n  }\n\n  removeStyleHeight() {\n    const next = (node: HTMLElement) => {\n      if (!node || (node.classList && node.classList.contains(Const.elTableBodyWraper)))\n        return\n      const height = node.style && node.style.height\n      if (height) {\n        node.style.height = 'auto'\n      }\n      if (node.hasChildNodes()) {\n        const nodeQueue = Array.from(node.children)\n        while (nodeQueue.length > 0) {\n          const curNode = nodeQueue.shift()\n          next(curNode as HTMLElement)\n        }\n      }\n    }\n    next(this.cloneEmptyTable as HTMLElement)\n  }\n\n  findRows(ele: HTMLElement) {\n    const rows = ele.querySelectorAll(Const.cardTableTr)\n    return Array.from(rows)\n  }\n\n  cleanTbody(ele: HTMLElement) {\n    const rows = ele.querySelectorAll(Const.cardTableTr)\n    Array.from(rows)?.forEach((row) => {\n      row.parentNode?.removeChild(row)\n    })\n  }\n\n  createTBModule(cloneEmptyTable: Element) {\n    const moduleTbWraper = document.createElement('div')\n    // moduleTbWraper.setAttribute(\"style\", \"border: 3px solid yellow\");\n    const emptyTable = cloneEmptyTable?.cloneNode(true) as HTMLElement\n    moduleTbWraper.appendChild(emptyTable as HTMLElement)\n    return moduleTbWraper\n  }\n}\n/**\n * 拆分table tbody\n */\n// splitTbody(tbody: TbQueueItem, distance: number, tbBomHeight: number) {\n//   if (tbBomHeight == null) tbBomHeight = 0;\n//   const module = tbody.module;\n//   const rowQueue = this.findRows(module);\n//   let idx = 0;\n//   this.cleanTbody(module);\n//   this.cloneTable(module as HTMLElement);\n//   distance = this.appendModule(\n//     this.createTBModule(this.cloneEmptyTable as Element),\n//     100,\n//     ModuleType.TBODY\n//   );\n//   const next = () => {\n//     if (idx >= rowQueue.length) return;\n//     const row = rowQueue[idx++];\n//     const height = (row as CurrentStyleElement).calcHeight;\n\n//     if (distance > height + tbBomHeight) {\n//       distance = this.appendModule(row, height, ModuleType.ROW);\n//     } else {\n//       distance = this.createWraper(module);\n//       distance = this.appendModule(\n//         this.createTBModule(this.cloneEmptyTable as Element),\n//         100,\n//         ModuleType.TBODY\n//       );\n//       distance = this.appendModule(row, height, ModuleType.ROW);\n//     }\n//     next();\n//   };\n//   next();\n//   return distance;\n// }\n","import { PrintPageDeclare, ModuleInfo, PageInfo, Print } from \"../index\";\nimport Const from \"./const\";\nimport SplitePage from \"./SplitePage\";\n\nexport default class Compose extends SplitePage implements PrintPageDeclare {\n  constructor(module: ModuleInfo) {\n    super();\n    this.pageInfo = module.pageInfo;\n    console.log(\"this.pageInfo\", this.pageInfo);\n    const { deviceParams, needTpl } = this.pageInfo;\n    const { height, width } = deviceParams || { width: 0, height: 0 };\n    this.pageHeight = height;\n    this.pageWidth = width;\n    this.needTpl = needTpl as boolean;\n    this.moduleId = module.moduleId;\n    this.init(this.moduleId);\n  }\n  rootWraperEle: HTMLElement | null = null;\n  wraperDiv = [];\n  moduleId: string;\n  pageInfo: PageInfo;\n  pageHeight = 0;\n  pageWidth = 0;\n  dfsChild = null;\n  needTpl = false;\n  init(ele: string) {\n    this.rootWraperEle = document.querySelector(ele);\n    if (this.rootWraperEle == null) {\n      if (process.env.NODE_ENV === \"production\") {\n        console.error(`找不到${ele}包裹元素！`);\n      } else {\n        throw new Error(`找不到${ele}包裹元素！`);\n      }\n      return;\n    }\n\n    this.needTpl && Compose.getTpl();\n    console.log(\"Compose.tplMap\", Compose.headerTplMap);\n    this.walk(this.rootWraperEle as HTMLElement);\n    console.log(\"this.childMap\", this.childMap);\n  }\n\n  print() {\n    return new Promise(\n      (resolve: (value: boolean) => void, reject: (value: boolean) => void) => {\n        this.splitPage(this.pageInfo);\n        console.log(\"this.pageInfo111\", this.pageInfo);\n        console.log(\"this.deps\", this.deps);\n        if (this.rootWraperEle) {\n          this.clearContainer();\n          this.appendPage(this.deps as HTMLElement);\n          this.deps = null;\n          Print.completedModule(this.moduleId);\n          resolve(true);\n        } else {\n          reject(false);\n          throw new Error(\"布局失败\");\n        }\n      }\n    );\n  }\n\n  clearContainer() {\n    Array.from((this.rootWraperEle as HTMLElement)?.children).forEach(\n      (eleItem) => {\n        this.rootWraperEle?.removeChild(eleItem);\n      }\n    );\n  }\n\n  appendPage(nodes: HTMLElement) {\n    if (this.pageInfo.lastModule) {\n      const lastChild = nodes.lastElementChild;\n      if (lastChild) {\n        lastChild.classList.remove(Const.printImgWraper);\n        lastChild.classList.remove(Const.printPageWraper);\n        lastChild.classList.add(Const.printLastWraper);\n      }\n    }\n    Array.from(nodes.children).forEach((node, index, arr) => {\n      this.rootWraperEle?.appendChild(node);\n    });\n  }\n}\n","import { MarkConfig } from \"../index\";\n\nfunction waterMark(markConfig: MarkConfig) {\n  const baseConfig = {\n    // waterMarkId: markConfig.waterMarkId,\n    waterMarkContent: \"水印内容\",\n    waterMarkX: -10,\n    waterMarkY: 40,\n    waterMarkRows: 1000,\n    waterMarkCols: 200,\n    waterMarkXSpace: 140,\n    waterMarkYSpace: 80,\n    waterMarkColor: \"#999999\",\n    waterMarkAlpha: 0.2,\n    waterMarkFontSize: \"25px\",\n    waterMarkFont: \"微软雅黑\",\n    waterMarkWidth: 150,\n    waterMarkHeight: 100,\n    waterMarkAngle: 15,\n  };\n  const settings = Object.assign({}, baseConfig, markConfig);\n  if (arguments.length === 1 && typeof arguments[0] === \"object\") {\n    const src = arguments[0] || {};\n    for (const key in src) {\n      if (src[key] && settings[key] && src[key] === settings[key]) continue;\n      else if (src[key]) settings[key] = src[key];\n    }\n  }\n  const obj = document.getElementById(settings.waterMarkId);\n\n  if (!obj) {\n    throw new Error(`${markConfig.waterMarkId} must be exist in document`);\n  }\n\n  const tmpObj = document.createDocumentFragment();\n  const pageWidth = obj.clientWidth;\n  console.log(\"pageWidth\", pageWidth);\n  const pageHeight = obj.offsetHeight;\n  const r1 =\n    settings.waterMarkX +\n    settings.waterMarkWidth * settings.waterMarkCols +\n    settings.waterMarkXSpace * (settings.waterMarkCols - 1);\n  if (settings.waterMarkCols == 0 || parseInt(String(r1)) > pageWidth) {\n    const r2 =\n      (pageWidth - settings.waterMarkX + settings.waterMarkXSpace) /\n      (settings.waterMarkWidth + settings.waterMarkXSpace);\n    settings.waterMarkCols = parseInt(String(r2));\n    const r3 =\n      (pageWidth -\n        settings.waterMarkX -\n        settings.waterMarkWidth * settings.waterMarkCols) /\n      (settings.waterMarkCols - 1);\n    settings.waterMarkXSpace = parseInt(String(r3));\n  }\n  if (\n    settings.waterMarkRows == 0 ||\n    parseInt(\n      String(\n        settings.waterMarkY +\n          settings.waterMarkHeight * settings.waterMarkRows +\n          settings.waterMarkYSpace * (settings.waterMarkRows - 1)\n      )\n    ) > pageHeight\n  ) {\n    settings.waterMarkRows = parseInt(\n      String(\n        (settings.waterMarkYSpace + pageHeight - settings.waterMarkY) /\n          (settings.waterMarkHeight + settings.waterMarkYSpace)\n      )\n    );\n    settings.waterMarkYSpace = parseInt(\n      String(\n        (pageHeight -\n          settings.waterMarkY -\n          settings.waterMarkHeight * settings.waterMarkRows) /\n          (settings.waterMarkRows - 1)\n      )\n    );\n  }\n  let x;\n  let y;\n  settings.waterMarkRows =\n    settings.waterMarkRows == 0 ? 6 : settings.waterMarkRows;\n  for (let i = 0; i < settings.waterMarkRows; i++) {\n    y =\n      settings.waterMarkY +\n      (settings.waterMarkYSpace + settings.waterMarkHeight) * i;\n    y = isNaN(y) ? 40 : y;\n    for (let j = 0; j < settings.waterMarkCols; j++) {\n      x =\n        settings.waterMarkX +\n        (settings.waterMarkWidth + settings.waterMarkXSpace) * j;\n      const markElement = document.createElement(\"div\");\n      markElement.id = \"markElement\" + i + j;\n      markElement.appendChild(\n        document.createTextNode(settings.waterMarkContent)\n      );\n\n      //设置水印div倾斜显示\n      markElement.style.webkitTransform =\n        \"rotate(-\" + settings.waterMarkAngle + \"deg)\";\n      // @ts-ignore\n      markElement.style.MozTransform =\n        \"rotate(-\" + settings.waterMarkAngle + \"deg)\";\n      // @ts-ignore\n      markElement.style.msTransform =\n        \"rotate(-\" + settings.waterMarkAngle + \"deg)\";\n      // @ts-ignore\n      markElement.style.OTransform =\n        \"rotate(-\" + settings.waterMarkAngle + \"deg)\";\n      markElement.style.transform =\n        \"rotate(-\" + settings.waterMarkAngle + \"deg)\";\n      markElement.style.visibility = \"\";\n      markElement.style.position = \"absolute\";\n      markElement.style.left = x + \"px\";\n      markElement.style.top = y + \"px\";\n      markElement.style.overflow = \"hidden\";\n      markElement.style.opacity = String(settings.waterMarkAlpha);\n      markElement.style.fontSize = settings.waterMarkFontSize;\n      markElement.style.fontFamily = settings.waterMarkFont;\n      markElement.style.color = settings.waterMarkColor;\n      markElement.style.textAlign = \"center\";\n      markElement.style.width = \"auto !important\";\n      markElement.style.height = \"auto !important\";\n      markElement.style.zIndex = \"999999 !important\";\n      markElement.style.display = \"block\";\n      markElement.style[\"pointer-events\"] = \"none\";\n\n      markElement.style.filter =\n        \"alpha(opacity=\" + settings.waterMarkAlpha * 100 + \")\";\n      markElement.setAttribute(\"class\", \"markElement\");\n      tmpObj.appendChild(markElement);\n    }\n  }\n  obj.appendChild(tmpObj);\n}\nexport default waterMark;\n","import Compose from './Compose'\nimport { ModuleMap, ModuleInfo, MarkConfig } from '../index'\nimport { getDeviceParams } from './utils'\nimport waterMark from './waterMark'\nimport Const from './const'\n\nexport interface BaseClass {\n  cardTableTBHeaderWraper: string\n  cardElRowClass: string\n  elTableBodyWraper: string\n}\nexport interface PrintParmas {\n  moduleMap: ModuleMap | ModuleInfo\n  selectModule?: string[]\n  injectClass?: BaseClass\n  callback?: Function\n}\nexport class Print {\n  constructor({ selectModule, moduleMap, injectClass, callback }: PrintParmas) {\n    // 多个Map模块下载\n    if (selectModule && moduleMap) {\n      this.selectModule = selectModule\n      this.needFilter = true\n      this.moduleMap = moduleMap as ModuleMap\n    } else {\n      // 单个object模块下载\n      this.ModuleInfoSet = [arguments[0]]\n      this.needFilter = false\n    }\n\n    if (injectClass) {\n      this.injectClass = injectClass\n    }\n    if (callback) {\n      this.callback = callback\n    }\n    // this.deviceParams = getDeviceParams()\n    this.createPrint()\n  }\n\n  needFilter = true\n  selectModule: string[] = []\n  ModuleInfoSet: ModuleInfo[] = []\n  moduleMap = new Map()\n  deviceParams = { width: 794, height: 1120 }\n  injectClass: Partial<BaseClass> = {}\n  callback = Function.prototype\n\n  static completedMap = new Map()\n  static completedModule(moduleId: string) {\n    this.completedMap.set(moduleId, true)\n  }\n\n  async createPrint() {\n    this.needFilter && this.filterSelectModule()\n    // 注入不同ui组件的table class\n    if (this.injectClass && Object.keys(this.injectClass).length > 0) {\n      Const.setTableClass(this.injectClass)\n    }\n    this.ModuleInfoSet.forEach(async (module: ModuleInfo, index) => {\n      if (this.ModuleInfoSet.length - 1 === index) {\n        module.pageInfo.lastModule = true\n      }\n      await this.onPrint(module)\n    })\n\n    await this.exitCallback()\n  }\n\n  exitCallback() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        console.log('callback')\n        this.callback && this.callback()\n        resolve(true)\n      }, 0)\n    })\n  }\n\n  async onPrint(module: ModuleInfo) {\n    if (Print.completedMap.get(module.moduleId)) {\n      console.log(`${module.moduleId} 模块已经分页过了`)\n      return\n    }\n    module.pageInfo.deviceParams = this.deviceParams\n    await new Compose(module).print()\n    if (module.pageInfo.waterMark) {\n      this.setWaterMark(module)\n    }\n  }\n\n  setWaterMark(module: ModuleInfo) {\n    setTimeout(() => {\n      console.log('waterMark')\n      waterMark(module.pageInfo.waterMarkConfig as MarkConfig)\n    }, 300)\n  }\n\n  filterSelectModule() {\n    this.ModuleInfoSet = this.selectModule\n      .filter((item) => this.moduleMap.has(item))\n      .map((item) => this.moduleMap.get(item))\n  }\n}\n"],"names":[],"mappings":"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"}